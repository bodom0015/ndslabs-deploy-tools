apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  name: ndslabs-ingress
spec:
  {% if use_tls %}
  tls:
  - hosts:
    - www.{{ dns_domain }}
    secretName: ndslabs-tls-secret
  {% endif %}
  rules:
  - host: www.{{ dns_domain }}
    http:
      paths:
      - path: /api
        backend:
          serviceName: ndslabs-apiserver
          servicePort: 30001
      - path: /ui
        backend:
          serviceName: ndslabs-gui
          servicePort: 80
